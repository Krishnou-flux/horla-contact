<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Le Horla – Flux</title>
<style>
body {
  margin: 0;
  background: #000;
  color: #c0c0c0;
  font-family: "Courier New", monospace;
  text-align: center;
  padding: 50px;
  height: 100vh;
  overflow: hidden;
}

h1 {
  font-size: 3em;
  color: #8b0000;
  letter-spacing: 5px;
  text-shadow: 0 0 10px #ff0000aa;
}

#puzzle {
  display: grid;
  grid-template-columns: repeat(5, 50px);
  grid-gap: 5px;
  justify-content: center;
  margin-top: 50px;
}

.tile {
  width: 50px;
  height: 50px;
  background: #333;
  cursor: pointer;
  transition: all 0.2s linear;
}

#linkContainer {
  display: none;
  margin-top: 40px;
}

a {
  color: #ff2222;
  text-decoration: none;
  padding: 10px 20px;
  border: 2px solid #ff2222;
  border-radius: 8px;
  background: rgba(20,0,0,0.2);
  text-shadow: 0 0 5px #ff0000aa;
  transition: all 0.2s ease-in-out;
}

a:hover {
  color: #fff;
  border-color: #fff;
  background: rgba(255,0,0,0.2);
  box-shadow: 0 0 20px #ff0000;
}

@keyframes shake {
  0%,100% { transform: translate(0,0); }
  25% { transform: translate(-3px,1px); }
  50% { transform: translate(3px,-2px); }
  75% { transform: translate(-2px,2px); }
}
</style>
</head>
<body>
<h1>LE HORLA</h1>
<p>Les murmures s’assemblent.<br>Le flux est verrouillé. Trouve la pièce rouge pour continuer.</p>

<div id="puzzle"></div>

<div id="linkContainer">
  <a href="https://discord.gg/YeDVg2FaFa" target="_blank">ENTRER DANS LE FLUX</a>
</div>

<script>
const puzzle = document.getElementById('puzzle');
const linkContainer = document.getElementById('linkContainer');

// Créer 25 tuiles et choisir une rouge aléatoire
const redIndex = Math.floor(Math.random() * 25);
const tiles = [];

for(let i=0; i<25; i++){
  const tile = document.createElement('div');
  tile.classList.add('tile');
  tile.dataset.red = i === redIndex ? "true" : "false";

  tile.addEventListener('click', () => {
    if(tile.dataset.red === "true"){
      puzzle.style.display = 'none';
      linkContainer.style.display = 'block';
    } else {
      tile.style.animation = 'shake 0.3s';
      setTimeout(() => tile.style.animation = '', 300);
    }
  });

  puzzle.appendChild(tile);
  tiles.push(tile);
}

// Fonction pour couleur aléatoire
function randomColor() {
  const r = Math.floor(Math.random()*150);
  const g = Math.floor(Math.random()*150);
  const b = Math.floor(Math.random()*150);
  return `rgb(${r},${g},${b})`;
}

// Animation folle toutes les 0.3s
setInterval(() => {
  tiles.forEach(tile => {
    if(tile.dataset.red === "true") {
      // rouge sombre pour fondre
      tile.style.backgroundColor = `rgb(${100+Math.random()*50},0,0)`;
    } else {
      tile.style.backgroundColor = randomColor();
    }
    tile.style.transform = `translate(${Math.random()*8-4}px, ${Math.random()*8-4}px)`;
  });
}, 300);
</script>
</body>
</html>
